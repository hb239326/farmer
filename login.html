<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title data-i18n="page_title">Farmer Login — CropAI</title>
  <link rel="stylesheet" href="styles.css">
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
  <style>
    body { background: linear-gradient(180deg,#0f766e,#064e3b); min-height:100vh; font-family: 'Inter', ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji"; }
    .card { max-width:460px; margin:6vh auto; background:rgba(255,255,255,0.9); border-radius:16px; padding:28px; box-shadow:0 20px 50px rgba(2,6,23,0.45); backdrop-filter:blur(10px); }
    .field { margin-bottom:14px; }
    .muted { color:#6b7280; font-size:0.95rem }
    input::placeholder { color:#000; opacity:1; }
    @keyframes float1 { 0% { transform: translate(0,0) scale(1); } 50% { transform: translate(14px,-12px) scale(1.05); } 100% { transform: translate(0,0) scale(1); } }
    @keyframes float2 { 0% { transform: translate(0,0) scale(1); } 50% { transform: translate(-16px,10px) scale(0.97); } 100% { transform: translate(0,0) scale(1); } }
    @keyframes float3 { 0% { transform: translate(0,0) scale(1); } 50% { transform: translate(8px,16px) scale(1.03); } 100% { transform: translate(0,0) scale(1); } }
    .blob1 { animation: float1 10s ease-in-out infinite; }
    .blob2 { animation: float2 12s ease-in-out infinite; }
    .blob3 { animation: float3 14s ease-in-out infinite; }
  </style> 
</head>
<body>
  <div class="fixed inset-0 -z-10 overflow-hidden">
    <div class="blob1 absolute -top-16 -left-16 h-72 w-72 rounded-full bg-emerald-400 opacity-30 blur-3xl"></div>
    <div class="blob2 absolute top-24 -right-10 h-80 w-80 rounded-full bg-teal-300 opacity-30 blur-3xl"></div>
    <div class="blob3 absolute bottom-0 left-1/2 -translate-x-1/2 h-64 w-64 rounded-full bg-cyan-300 opacity-20 blur-3xl"></div>
  </div>
  </div>
  <div class="mx-auto max-w-[480px] rounded-2xl p-[1px] bg-gradient-to-r from-emerald-400/60 to-cyan-400/60 shadow-[0_25px_60px_rgba(2,6,23,0.45)]">
  <div class="card ring-1 ring-white/60">
    <div class="mb-4 flex items-center justify-between">
      <div class="flex items-center gap-3">
        <div class="grid h-10 w-10 place-items-center rounded-xl bg-emerald-600 text-white shadow-lg shadow-emerald-600/30">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="h-6 w-6"><path d="M12 2a7 7 0 0 0-7 7c0 5.25 7 13 7 13s7-7.75 7-13a7 7 0 0 0-7-7Zm0 9.5A2.5 2.5 0 1 1 12 6a2.5 2.5 0 0 1 0 5.5Z"/></svg>
        </div>
        <div>
          <div class="text-xl font-extrabold tracking-tight bg-gradient-to-r from-emerald-700 to-cyan-600 bg-clip-text text-transparent">CropAI</div>
          <div class="text-xs text-stone-500" data-i18n="brand_tagline">Smarter crop care</div>
        </div>
      </div>
      <div class="flex items-center justify-end">
        <label for="langSel" class="mr-2 text-sm text-stone-600" data-i18n="lang_label">Language</label>
        <select id="langSel" class="rounded-md border px-2 py-1 text-sm shadow-sm">
          <option value="en">English</option>
          <option value="hi">हिन्दी</option>
        </select>
      </div>
    </div>
    <div class="mb-3 grid place-items-center">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 128 64" class="h-16 w-auto text-emerald-600">
        <defs>
          <linearGradient id="g1" x1="0" y1="0" x2="1" y2="1">
            <stop offset="0%" stop-color="#059669"/>
            <stop offset="100%" stop-color="#06b6d4"/>
          </linearGradient>
        </defs>
        <g fill="url(#g1)">
          <path d="M16 48c12-8 16-24 24-24s12 8 20 8 16-16 28-16 16 8 24 8v8c-8 0-12-8-24-8s-20 16-28 16-12-8-20-8-12 16-24 24z"/>
        </g>
      </svg>
    </div>
    <h1 class="text-3xl font-extrabold text-stone-900" data-i18n="login_title">Farmer Login</h1>
    <p class="muted mt-1" data-i18n="login_subtitle">Enter your name, mobile number and Gmail to continue to detection.</p>
    <ul class="mt-3 grid grid-cols-1 gap-2 text-sm text-stone-600">
      <li class="flex items-center gap-2"><span class="grid h-5 w-5 place-items-center rounded-full bg-emerald-100 text-emerald-700">✓</span><span data-i18n="benefit_fast">Fast setup, no password</span></li>
      <li class="flex items-center gap-2"><span class="grid h-5 w-5 place-items-center rounded-full bg-emerald-100 text-emerald-700">✓</span><span data-i18n="benefit_personal">Personalized detection dashboard</span></li>
      <li class="flex items-center gap-2"><span class="grid h-5 w-5 place-items-center rounded-full bg-emerald-100 text-emerald-700">✓</span><span data-i18n="benefit_privacy">Privacy-friendly, Gmail only</span></li>
    </ul>

    <form id="loginForm" novalidate autocomplete="off">
      <div class="field">
        <label class="block text-sm font-medium text-stone-700" data-i18n="full_name">Full name</label>
        <div class="relative">
          <span class="pointer-events-none absolute inset-y-0 left-0 grid w-10 place-items-center text-stone-900">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="h-5 w-5"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"/></svg>
          </span>
          <input id="name" type="text" required class="w-full rounded-md border px-3 py-2 pl-10 focus:outline-none focus:ring-2 focus:ring-emerald-400 shadow-sm" placeholder="Your name" />
        </div>
      </div>
      <div class="field">
        <label class="block text-sm font-medium text-stone-700" data-i18n="mobile_number">Mobile number</label>
        <div class="relative">
          <span class="pointer-events-none absolute inset-y-0 left-0 grid w-10 place-items-center text-stone-900">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="h-5 w-5"><path stroke-linecap="round" stroke-linejoin="round" d="M2.25 6.75c0 8.284 6.716 15 15 15h1.5a2.25 2.25 0 0 0 2.25-2.25v-1.23a1.125 1.125 0 0 0-.852-1.09l-3.423-.856a1.125 1.125 0 0 0-1.173.417l-.97 1.293a.75.75 0 0 1-.746.269 12.036 12.036 0 0 1-7.143-7.143.75.75 0 0 1 .269-.746l1.293-.97a1.125 1.125 0 0 0 .417-1.173L6.87 3.102A1.125 1.125 0 0 0 5.78 2.25H4.5A2.25 2.25 0 0 0 2.25 4.5v2.25Z"/></svg>
          </span>
          <input id="phone" type="tel" required class="w-full rounded-md border px-3 py-2 pl-10 focus:outline-none focus:ring-2 focus:ring-emerald-400 shadow-sm" placeholder="+91XXXXXXXX" />
        </div>
      </div>
      <div class="field">
        <label class="block text-sm font-medium text-stone-700" data-i18n="email_gmail">Email (Gmail)</label>
        <div class="relative">
          <span class="pointer-events-none absolute inset-y-0 left-0 grid w-10 place-items-center text-stone-900">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" class="h-5 w-5"><path fill="#EA4335" d="M24 20.3 8.9 9.3c.6-.5 1.4-.8 2.3-.8h25.6c.9 0 1.7.3 2.3.8L24 20.3z"/><path fill="#A50E0E" d="M39.1 9.3 24 20.3 8.9 9.3 8 10c-.5.6-.8 1.4-.8 2.3v23.4c0 .9.3 1.7.8 2.3l.9.7 15.1-11V20.3L40 10l-.9-.7z"/><path fill="#4285F4" d="M40 10 24 20.3v7.4l9.1 6.6L40 38.7l.9-.7c.5-.6.8-1.4.8-2.3V12.3c0-.9-.3-1.7-.8-2.3L40 10z"/><path fill="#34A853" d="M8 38.7c.6.5 1.4.8 2.3.8h25.6c.9 0 1.7-.3 2.3-.8L24 27.7 8 38.7z"/></svg>
          </span>
          <input id="email" type="email" required class="w-full rounded-md border px-3 py-2 pl-10 focus:outline-none focus:ring-2 focus:ring-emerald-400 shadow-sm" placeholder="name@gmail.com" />
        </div>
      </div>
      <div class="mt-4 flex items-center justify-between gap-3">
        <button id="submitBtn" type="submit" class="inline-flex w-full justify-center rounded-md bg-gradient-to-r from-emerald-600 to-cyan-600 px-5 py-2.5 text-white shadow-lg shadow-emerald-600/30 transition hover:from-emerald-700 hover:to-cyan-700 hover:-translate-y-0.5 active:translate-y-0" data-i18n="continue">Continue</button>
        <button id="resetBtn" type="button" class="inline-flex whitespace-nowrap rounded-md bg-stone-200 px-4 py-2 text-stone-800 transition hover:bg-stone-300" data-i18n="refresh">Refresh</button>
      </div>
      <p id="msg" class="mt-3 text-sm text-red-600" aria-live="polite"></p>
    </form>
    <hr class="my-4" />
    <p class="text-xs muted" data-i18n="consent_notice">By continuing you agree to provide basic contact details used only for personalization and reports. No spam.</p>
  </div>

  <script>
    const I18N_LOGIN = {
      en: {
        page_title: 'Farmer Login — CropAI',
        lang_label: 'Language',
        login_title: 'Farmer Login',
        login_subtitle: 'Enter your name, mobile number and Gmail to continue to detection.',
        brand_tagline: 'Smarter crop care',
        benefit_fast: 'Fast setup, no password',
        benefit_personal: 'Personalized detection dashboard',
        benefit_privacy: 'Privacy-friendly, Gmail only',
        full_name: 'Full name',
        mobile_number: 'Mobile number',
        email_gmail: 'Email (Gmail)',
        continue: 'Continue',
        refresh: 'Refresh',
        consent_notice: 'By continuing you agree to provide basic contact details used only for personalization and reports. No spam.',
        err_name: 'Please enter your full name.',
        err_phone: 'Please enter a valid mobile number.',
        err_gmail: 'Please enter a valid Gmail address (ending with @gmail.com).'
      },
      hi: {
        page_title: 'किसान लॉगिन — CropAI',
        lang_label: 'भाषा',
        login_title: 'किसान लॉगिन',
        login_subtitle: 'जारी रखने के लिए अपना नाम, मोबाइल नंबर और Gmail दर्ज करें।',
        brand_tagline: 'स्मार्ट फसल देखभाल',
        benefit_fast: 'तेज़ सेटअप, पासवर्ड नहीं',
        benefit_personal: 'व्यक्तिगत डिटेक्शन डैशबोर्ड',
        benefit_privacy: 'गोपनीयता अनुकूल, केवल Gmail',
        full_name: 'पूरा नाम',
        mobile_number: 'मोबाइल नंबर',
        email_gmail: 'ईमेल (Gmail)',
        continue: 'जारी रखें',
        refresh: 'रीफ्रेश',
        consent_notice: 'जारी रखने पर आप सहमति देते हैं कि आपकी जानकारी केवल निजीकरण और रिपोर्ट के लिए उपयोग होगी। कोई स्पैम नहीं।',
        err_name: 'कृपया अपना पूरा नाम दर्ज करें।',
        err_phone: 'कृपया मान्य मोबाइल नंबर दर्ज करें।',
        err_gmail: 'कृपया मान्य Gmail पता दर्ज करें (जो @gmail.com पर समाप्त होता है)।'
      }
    };
    function getLang() {
      try { return localStorage.getItem('lang') || 'en'; } catch { return 'en'; }
    }
    function setLang(lang) {
      try { localStorage.setItem('lang', lang); } catch {}
    }
    function applyI18nLogin(lang) {
      const dict = I18N_LOGIN[lang] || I18N_LOGIN.en;
      document.querySelectorAll('[data-i18n]').forEach(el => {
        const key = el.getAttribute('data-i18n');
        if (dict[key]) el.textContent = dict[key];
      });
      // Set html lang attribute and page title
      try { document.documentElement.setAttribute('lang', lang); } catch {}
      const titleKey = 'page_title';
      if (dict[titleKey]) { try { document.title = dict[titleKey]; } catch {} }
      // Update placeholders as well
      const nameEl = document.getElementById('name');
      const phoneEl = document.getElementById('phone');
      const emailEl = document.getElementById('email');
      if (lang === 'hi') {
        nameEl?.setAttribute('placeholder', 'आपका नाम');
        phoneEl?.setAttribute('placeholder', '+91XXXXXXXX');
        emailEl?.setAttribute('placeholder', 'name@gmail.com');
      } else {
        nameEl?.setAttribute('placeholder', 'Your name');
        phoneEl?.setAttribute('placeholder', '+91XXXXXXXX');
        emailEl?.setAttribute('placeholder', 'name@gmail.com');
      }
    }
    const form = document.getElementById('loginForm');
    const nameEl = document.getElementById('name');
    const phoneEl = document.getElementById('phone');
    const emailEl = document.getElementById('email');
    const msgEl = document.getElementById('msg');
    const langSel = document.getElementById('langSel');
    const resetBtn = document.getElementById('resetBtn');

    // Init language
    const initLang = getLang();
    if (langSel) langSel.value = initLang;
    applyI18nLogin(initLang);
    langSel?.addEventListener('change', () => {
      const lang = langSel.value;
      setLang(lang);
      applyI18nLogin(lang);
    });

    function validPhone(p) {
      return /^\+?[0-9\s-]{7,15}$/.test(p);
    }
    function validGmail(e) {
      // basic check + require gmail domain
      const ok = /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e);
      if (!ok) return false;
      return e.toLowerCase().endsWith('@gmail.com');
    }

    form.addEventListener('submit', (ev) => {
      ev.preventDefault();
      msgEl.textContent = '';
      const name = (nameEl.value || '').trim();
      const phone = (phoneEl.value || '').trim();
      const email = (emailEl.value || '').trim();
      const dict = I18N_LOGIN[getLang()] || I18N_LOGIN.en;
      if (!name) { msgEl.textContent = dict.err_name; nameEl.focus(); return; }
      if (!validPhone(phone)) { msgEl.textContent = dict.err_phone; phoneEl.focus(); return; }
      if (!validGmail(email)) { msgEl.textContent = dict.err_gmail; emailEl.focus(); return; }

      // Save profile to localStorage (index.html reads this)
      const profile = { name, phone, email, ts: Date.now() };
      try {
        localStorage.setItem('userProfile', JSON.stringify(profile));
      } catch (e) {
        console.warn('Could not save profile to localStorage', e);
      }
      // Redirect to homepage header (no hash)
      window.location.href = 'index.html';
    });

    // Refresh/reset behavior
    resetBtn?.addEventListener('click', () => {
      form.reset();
      msgEl.textContent = '';
      nameEl.focus();
      // restore icons visibility after reset
      updateAllIcons();
    });
    // Ensure fields are cleared when page is restored from bfcache
    window.addEventListener('pageshow', (e) => {
      if (e.persisted) {
        form.reset();
        msgEl.textContent = '';
        updateAllIcons();
      }
    });

    // Hide leading icons when input has value
    function bindHideIconOnInput(inputEl) {
      if (!inputEl) return;
      const icon = inputEl.previousElementSibling;
      const update = () => {
        if (!icon) return;
        icon.style.visibility = inputEl.value ? 'hidden' : 'visible';
      };
      inputEl.addEventListener('input', update);
      inputEl.addEventListener('change', update);
      update();
    }
    function updateAllIcons() {
      [nameEl, phoneEl, emailEl].forEach(el => {
        if (!el) return;
        const icon = el.previousElementSibling;
        if (icon) {
          icon.style.visibility = el.value ? 'hidden' : 'visible';
        }
      });
    }
    bindHideIconOnInput(nameEl);
    bindHideIconOnInput(phoneEl);
    bindHideIconOnInput(emailEl);
  </script>
</body>
</html>